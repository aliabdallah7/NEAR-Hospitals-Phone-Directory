(this["webpackJsonphospital-phone-dir"]=this["webpackJsonphospital-phone-dir"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},110:function(e,t){},120:function(e,t){},138:function(e,t){},166:function(e,t){},170:function(e,t,n){"use strict";n.r(t);n(96);var a=n(0),r=n.n(a),c=n(26),s=n.n(c),o=(n(101),n(102),n(1));var l=function(){return Object(o.jsx)("h1",{children:"Hospital phone directory"})};var i=function(){return Object(o.jsxs)("p",{children:["Here's a phone directory where you will find contact data of many hospitals",Object(o.jsx)("br",{}),"You will find the name of the hospital, their phone number, a contact email, their location, etc.",Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),"Also you can register your own hospital if you are a CEO of a one, so other users can find you easily."]})},u=n(6),j=n.n(u),b=n(15),p=n(12),h=n(23),d=n(51),O=n(57),f=n(92),x="dev-1634742185963-52355839606274",m=new(n.n(f).a)("70000000000000"),v=function(){var e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.connect)({networkId:"testnet",keyStore:new O.keyStores.BrowserLocalStorageKeyStore,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org"});case 2:return t=e.sent,n=new O.WalletConnection(t,"miguelislas"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.account().functionCall({contractId:x,methodName:"getHospitalsData",gas:m});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.account().functionCall({contractId:x,methodName:"registerHospital",args:n,gas:m});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var w=function(e){var t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(p.a)(s,2),i=(l[0],l[1]),u=Object(a.useState)([]),O=Object(p.a)(u,2),f=(O[0],O[1],Object(a.useState)(!1)),m=Object(p.a)(f,2),g=(m[0],m[1]);Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,v();case 4:t=e.sent,c(t),i(t.getAccountId()),g(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[]);var y=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,r.requestSignIn(x,"hospitals phone directory");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:g(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)(d.a,{className:"",children:[Object(o.jsx)(h.a,{variant:"success",className:"m-4",size:"md",onClick:function(){return y()},children:"Log in"}),Object(o.jsx)("span",{children:"Log in to start viewing hospitals's data"})]})},C=n(93),N=n.n(C);var k=function(e){return Object(o.jsxs)("div",{className:N.a.fondo,children:[Object(o.jsx)(l,{}),Object(o.jsx)(i,{}),Object(o.jsx)(w,{setIsLoggedIn:e.setIsLoggedIn})]})},I=n(36),S=n(8),L=n(55),H=n(29);var E=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useRef)(),l=Object(a.useRef)(),i=Object(a.useState)(),u=Object(p.a)(i,2),d=u[0],O=u[1],f=Object(a.useState)(""),x=Object(p.a)(f,2),m=x[0],g=x[1];Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,console.log(t),O(t),g(t.getAccountId()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);var w=function(){var e=Object(b.a)(j.a.mark((function e(){var a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:t.current.value,phone:n.current.value,email:r.current.value,numberEmployees:c.current.value,website:s.current.value,location:l.current.value},console.log(a),e.prev=2,console.log("Por llamar"),e.next=6,y(d,a);case 6:o=e.sent,console.log(o),location.reload(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("error"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)(H.a,{show:e.show,onHide:e.handleClose,children:Object(o.jsxs)(H.a.Dialog,{children:[Object(o.jsx)(H.a.Header,{children:Object(o.jsx)(H.a.Title,{children:"Register hospital"})}),console.log(m),Object(o.jsx)(H.a.Body,{children:Object(o.jsxs)(S.a,{children:[Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Hospital's name:"}),Object(o.jsx)(S.a.Control,{type:"text",placeholder:"Name of the hospital",ref:t})]}),Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Hospital's phone:"}),Object(o.jsx)(S.a.Control,{type:"text",placeholder:"phone of the hospital",ref:n})]}),Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Hospital's email:"}),Object(o.jsx)(S.a.Control,{type:"email",placeholder:"email of the hospital",ref:r})]}),Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Number of employees:"}),Object(o.jsx)(S.a.Control,{type:"text",placeholder:"How many employees are working here?",ref:c})]}),Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Hospital's website:"}),Object(o.jsx)(S.a.Control,{type:"text",placeholder:"website of the hospital",ref:s})]}),Object(o.jsxs)(S.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(o.jsx)(S.a.Label,{children:"Hospital's location:"}),Object(o.jsx)(S.a.Control,{type:"text",placeholder:"Location of the hospital",ref:l})]})]})}),Object(o.jsxs)(H.a.Footer,{children:[Object(o.jsx)(h.a,{variant:"secondary",onClick:e.handleClose,children:"Close"}),Object(o.jsx)(h.a,{variant:"primary",onClick:function(){return w()},children:"Register hospital"})]})]})})},F=n(94),R=n.n(F);var _=function(e){var t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(p.a)(s,2),i=(l[0],l[1]),u=Object(a.useState)(!1),d=Object(p.a)(u,2),O=d[0],f=d[1],x=Object(a.useRef)();return Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,c(t),i(t.getAccountId()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(I.a,{bg:"light",expand:"lg",children:[Object(o.jsx)(I.a.Brand,{href:"#",children:"Companies phone directory"}),Object(o.jsx)(I.a.Toggle,{"aria-controls":"navbarScroll"}),Object(o.jsxs)(I.a.Collapse,{id:"navbarScroll",children:[Object(o.jsxs)(S.a,{className:"d-flex justify-content-between",children:[Object(o.jsx)(L.a,{type:"search",placeholder:"Search",className:R.a.myNavbar,"aria-label":"Search",ref:x}),Object(o.jsx)(h.a,{variant:"outline-info",onClick:function(){return e.setHospitalName(x.current.value)},children:"Search"})]}),Object(o.jsxs)(I.a.Collapse,{className:"justify-content-end",children:[Object(o.jsx)(h.a,{variant:"success",onClick:function(){return f(!0)},children:"Register hospital"}),Object(o.jsx)(h.a,{variant:"danger",className:"m-2",onClick:function(){try{r.signOut(),localStorage.removeItem("near-api-js:keystore:miguelislas.testnet:testnet")}catch(e){console.log(e)}location.reload()},children:"Log out"})]})]})]}),Object(o.jsx)(E,{show:O,handleClose:function(){return f(!1)}})]})},A=n(72),B=n(37);var G=function(e){return Object(o.jsxs)(B.a,{border:"secondary",style:{width:"18rem"},children:[Object(o.jsx)(B.a.Header,{children:e.name}),Object(o.jsxs)(B.a.Body,{children:[Object(o.jsx)(B.a.Title,{children:e.creatorId}),Object(o.jsxs)(B.a.Text,{children:[Object(o.jsxs)("p",{children:["Location: ",e.location]}),Object(o.jsxs)("p",{children:["Phone: ",e.phone]}),Object(o.jsxs)("p",{children:["Number employees: ",e.numberEmployees]}),Object(o.jsxs)("p",{children:["email: ",e.email]}),Object(o.jsxs)("p",{children:["website: ",e.website]})]})]})]})},T=n(95),D=n.n(T);var J=function(e){return Object(o.jsx)(A.a,{className:"d-flex justify-content-around",children:e.hospitals.map((function(e){return Object(o.jsx)(G,{className:D.a.hospitalCard,name:e.name,creatorId:e.creatorId,phone:e.phone,email:e.email,numberEmployees:e.numberEmployees,location:e.location,website:e.website})}))})};var P=function(e){var t=Object(a.useState)(),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(p.a)(s,2),i=l[0],u=l[1],h=Object(a.useState)(!0),O=Object(p.a)(h,2),f=O[0],x=O[1],m=Object(a.useState)([]),y=Object(p.a)(m,2),w=y[0],C=y[1];return Object(a.useEffect)((function(){Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:t=e.sent,console.log(t),c(t),u(t.getAccountId()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]),Object(a.useEffect)((function(){x(!0),Object(b.a)(j.a.mark((function t(){var n,a,c,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(r);case 3:n=t.sent,a=n.status.SuccessValue,c=atob(a).split("\\n"),s=JSON.parse(c),console.log(e.hospitalName),e.hospitalName?s.forEach((function(t){t.name===e.hospitalName&&(C([t]),x(!1))})):(C(s),x(!1)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}),[r,e.hospitalName]),Object(o.jsxs)(d.a,{className:"m-4",children:[console.log(i),f?Object(o.jsx)("p",{children:"loading..."}):Object(o.jsx)(J,{hospitals:w})]})};var Q=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(_,{setHospitalName:r}),Object(o.jsx)(P,{hospitalName:n})]})};var U=function(){var e=localStorage.getItem("near-api-js:keystore:miguelislas.testnet:testnet");return Object(o.jsx)("div",{className:"App",children:e?Object(o.jsx)(Q,{}):Object(o.jsx)(k,{})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(U,{})}),document.getElementById("root")),q()},93:function(e,t,n){e.exports={fondo:"login_fondo__3iQQs"}},94:function(e,t,n){e.exports={myNavbar:"navbar_myNavbar__DQbsJ"}},95:function(e,t,n){e.exports={hospitalCard:"hospitals_hospitalCard__2uU8l"}}},[[170,1,2]]]);
//# sourceMappingURL=main.e29103f5.chunk.js.map